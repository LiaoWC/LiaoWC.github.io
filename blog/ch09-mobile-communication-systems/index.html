<!doctype html>
<html lang="zh-Hant-TW">
<head>
    <meta charset="utf-8">
    <meta name="theme-color" content="#195c82">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>通訊原理與無線網路 - 09 Mobile Communication Systems — Liao W.C.</title>
    
    <link rel="shortcut icon" type="image/x-icon" href="../../static/img/favicon.png">

    

    
    <link rel="stylesheet" href="../../third_parties/fontawesome-free-5.15.3-web/css/all.css" -->
    <!--link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"-->

    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">

    
    <link rel="stylesheet" href="../../third_parties/bootstrap-4.6.0-dist/css/bootstrap.css">
    <!--link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
          integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous"-->

    
    <link href="../../third_parties/MDB-Free_4.19.2/css/mdb.css" rel="stylesheet">
    <!--link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" rel="stylesheet"-->

    

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-176271587-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());
        gtag('config', 'UA-176271587-1');
    </script>

    
    <script src="../../third_parties/MDB-Free_4.19.2/js/jquery.js"></script>
    <!--script src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script-->

    
    
    <!--script-- src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
            integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
            crossorigin="anonymous"></script-->

    
    <script src="../../third_parties/bootstrap-4.6.0-dist/js/bootstrap.bundle.js"></script>
    <!--script-- src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
            integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
            crossorigin="anonymous"></script-->

    
    <script type="text/javascript" src="../../third_parties/MDB-Free_4.19.2/js/mdb.js"></script>
    <!--script-- type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js"></script-->

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css"
          integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous">

    <!-- The loading of KaTeX is deferred to speed up page rendering -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.js"
            integrity="sha384-YNHdsYkH6gMx9y3mRkmcJ2mFUjTd0qNQQvY9VYZgQd7DcN7env35GzlmFaZ23JGp"
            crossorigin="anonymous"></script>

    <!-- To automatically render math in text elements, include the auto-render extension: -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/contrib/auto-render.min.js"
            integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"
            onload="renderMathInElement(document.body);"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            renderMathInElement(document.body, {
                // customised options
                // • auto-render specific keys, e.g.:
                delimiters: [
                    {left: '$$', right: '$$', display: true},
                    {left: '$', right: '$', display: false},
                    {left: '\\(', right: '\\)', display: false},
                    {left: '\\[', right: '\\]', display: true}
                ],
                // • rendering keys, e.g.:
                throwOnError: false
            });
        });
    </script>

    
    <link rel="stylesheet" href="../../static/style.css">
    <link rel="stylesheet" type="text/css" href="../../static/css/partial_layout/footer.css">
    <link rel="stylesheet" type="text/css" href="../../static/css/partial_layout/header.css">
    
    <link rel="stylesheet" type="text/css" href="../../static/css/blog_base.css">

</head>
<body>




<section id="layout-nav">

    <nav id='top-nav' class="navbar navbar-expand-lg navbar-dark">
        <div class="container-xl" id="nav-section-container">
            <!--(Old logo)   a id='logo' class="navbar-brand" href="/" aria-label="Go to home page">LiaoWC</a-->
            <a id="" class="navbar-brand" href="/" aria-label="Go to home page"><img src="../../static/img/lwc_logo2.png" alt="logo" style="max-height: 100px;"></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                    aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/">Home</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarProjects" role="button"
                           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Projects
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarProjects">
                            <a class="dropdown-item" href="../../projects/"
                               aria-label="See all projects">All projects</a>
                            <div class="dropdown-divider"></div>
                            <h6 class="text-center dropdown-header">Categories</h6>
                            
    
        <a class="dropdown-item" href="../../projects/categories/ai/"
           aria-label="See project category: AI">AI</a>
    
        <a class="dropdown-item" href="../../projects/categories/database/"
           aria-label="See project category: Database">Database</a>
    
        <a class="dropdown-item" href="../../projects/categories/flask/"
           aria-label="See project category: Flask">Flask</a>
    
        <a class="dropdown-item" href="../../projects/categories/nodejs/"
           aria-label="See project category: NodeJS">NodeJS</a>
    
        <a class="dropdown-item" href="../../projects/categories/philosophy/"
           aria-label="See project category: Philosophy">Philosophy</a>
    
        <a class="dropdown-item" href="../../projects/categories/web-app/"
           aria-label="See project category: Web App">Web App</a>
    

                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarShortcut" role="button"
                           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Shortcut
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarShortcut">
                            <a class="dropdown-item" href="/programs/DeepThinking/DeepThinking.html"
                               aria-label="Go to DeepThinking">DeepThinking</a>
                            <a class="dropdown-item"
                               href="/programs/GraphvizCodeTransformer/GraphvizCodeTransformer.html"
                               aria-label="Go to Graphviz Code Transformer">Graphviz
                                Code to SVG</a>
                            
                            
                        </div>
                    </li>
                    
                        
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/" aria-label="Go to blog page">Blog</a>
                        </li>
                    
                    <!--                    <li class="nav-item">-->
                    <!--                        <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>-->
                    <!--                    </li>-->
                    <div class="container" id="hidden_blog_nav"
                         style="background-color: white; border-radius: 5px; padding-top: 1.8vh;padding-bottom: 1.8vh; display: none;"></div>
                </ul>
            </div>
        </div>
    </nav>
</section>



    <section id="blog_post_center">
        <div class="row" id="blog_row">
            <div class="col-md-3 mx-4 my-4" id="blog_left_nav">
                <div class="container" id="left_nav_container">
                    
                    <section id="section_navbar">
                        <div class="container-fluid">
                            <nav>
                                <ul class="nav navbar-nav">
                                    <li><a
                                            href="../">All Posts</a>
                                    </li>
                                    
                                    <li>
                                        
    <a href="../langs/" class="dark">Language</a>
    <ul style="list-style: none;">
        
            <li>
                <a href="../langs/en/">English Articles</a>
            </li>
        
            <li>
                <a href="../langs/ch/">中文文章</a>
            </li>
        
    </ul>

                                    </li>
                                    
                                    
                                    
                                    
                                    
                                    
                                    <li>
                                        <a href="../" class="dark">Tags</a>
                                        
                                        <ul style="list-style: none;">
                                            <li>

                                                
                                                    
                                                        
    
    <a href="../tag/Data Analytics/" class="badge bg-white black-text">Data Analytics</a>

                                                    
                                                        
    
    <a href="../tag/Web Maintenance/" class="badge bg-white black-text">Web Maintenance</a>

                                                    
                                                        
    
    <a href="../tag/通訊原理與無線網路/" class="badge bg-white black-text">通訊原理與無線網路</a>

                                                    
                                                

                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </section>
                    
                </div>
            </div>

            <div class="col-md-7" id="blog_center_area">
                
                <div class="container-xl">
                    
    
    <div class="blog-post text-break">
        <div>
            
                <h1 class="title">通訊原理與無線網路 - 09 Mobile Communication Systems</h1>
            
        </div>

        
    <span class="badge badge-default">
    
        <a href="../langs/ch/" class="text-white">
            Chinese
        </a>
    
    </span>


        

            <span class="badge badge-primary">
                        <a href="../tag/通訊原理與無線網路/" class="white-text"
                           aria-label="blog@tag通訊原理與無線網路">
                            通訊原理與無線網路
                        </a>
                    </span>

            

        



        <p class="meta">
            written by
            
                LiaoWC
            
            on 2021-05-31
        </p>
        <hr>
        
            <h2>Cellular System Infrastructure</h2>
<p><img src="untitled-7.png" alt=""></p>
<p>主要的兩塊：</p>
<ol>
<li>Radio Access Network (RAN)</li>
<li>Core Network (CN)</li>
</ol>
<p>名詞解釋</p>
<ul>
<li>BS = BTS (base transceiver system) + BSC (BS controller)</li>
<li>BTS: tower + antenna，塔台、天線</li>
<li>BSC: electronics，進行運算、功率控制、選通道，一個BSC可以管上百台BTS以上。不同的 BSC 要進行溝通要經過 MSC，在 4G（不確定 3G 有沒有）有多「BSC 和 BSC 之間的連線」，連不同的基地台而不用經過機房。</li>
<li>AUC (authentication center): 認證用戶、算錢</li>
<li>EIR (equipment identity register): 有硬體設備的資訊。可以找到你的手機在哪個基地台附近。</li>
<li>VLR (visitor location register): 記錄訪問這個 MSC 的 MS 的資訊。</li>
<li>HLR (home location register): 儲存基本資料（像戶籍地址的感覺）；會記錄你的VLR在哪裡。</li>
<li>PSDN: public switch data network（市話接 modem 上網）、ISDN ⇒ 可以傳 data &amp; voice</li>
<li>MSC (a mobile switching center)</li>
</ul>
<p>Notes</p>
<ul>
<li>MS到BS是「無線」的，而基地台往機房這邊是「有線」拉光纖（到第五代有人開始提這邊也用無線）。</li>
<li>HLR 和 VLR 會互指。</li>
<li>天線跟 BSC 佔基地台的主要花費。</li>
</ul>
<h2>Registration</h2>
<p>MS 要註冊 Visiting-MSC，透過 beacon signal。Visiting-MSC 會回去問你的 Home-MSC，進行驗證，確認你的身份。會被登錄在 Visiting-MSC 的 VLR和在 Home-MSC HLR。</p>
<h2>Handoff</h2>
<p>MS在不同基地台之間轉換或者是在同個基地台不同天線裡轉換都稱為換手（handoff、handover）。換手的原因有很多種，像是因為你正在移動，所以需要換基地，也有可能是網路負載極度不平衡使得讓你換手去用不同基地台的資源。</p>
<p>換手分成兩個種類：hard 和 soft。</p>
<ul>
<li><p>Hard Handoff:</p>
<p>在建新的連線前先斷掉舊的連線。FDMA 和 TDMA 使用此種換手機制。</p>
</li>
<li><p>Soft Handoff:</p>
<p>建新的連線後才斷掉舊的連線。在 CDMA 的情境下，如果你正在使用的正交碼新的基地台目前沒有人使用，你可以直接搬過去新的基地台；但如果你正在用的基地台的正交碼已經有人在用了，還是要用 hard handoff。</p>
</li>
</ul>
<p>換手可能發生在不同基地台之間的轉換，也可能發生在同一個基地，像是更換使用不同的 sector。</p>
<h2>Roaming</h2>
<p>Roaming 和 handoff 相似的地方是它們常常都是因為使用者的移動而產生的，不同的地方在於 roaming 穿越核心網路，需要用到 <strong>router</strong>。Roaming 需要討論的是如何找到好的路徑。使用者跨越不同基地台的範圍時，若新的基地台所屬的 MSC 有所不同，可能需要 router 參與進來找尋溝通的路徑。</p>
<p><strong>Paging area</strong> (PA) 在這種是個重要的概念，一個 paging area 可能包含多個 MSC，它幫助我們進行路線的查找。試想，如果你用中華電信的號碼，別的電信業者的門號打來你的手機號碼，它難道會進行全域的廣播，把整個中華電信廣播一次？這樣的效率太差。一個個 paging area 的找跟一次全域地找，這種分區的查找較有效率。</p>
<h2>Mobile IP</h2>
<p>首先必需先了解 HA 與 PA：</p>
<ul>
<li>HA (home agent): 你啟動服務時位置最近的 router，但如果離你最近的 router 負載太重，也可能換成別的 router。</li>
<li>FA (foreign agent): 啟動服務之後，你移動到別的位置去了，隨著你移動而換成的 router 為 foreign agent。</li>
</ul>
<p>Mobile IP 流程：</p>
<ol>
<li>MS 偵測到 FA 定期發的 beacon signal 或 MS 主動發 agent solicitation messages。</li>
<li>FA 分配地址給 MS。若給的是 FA 自己的地址，稱為 <strong>CoA</strong> (care-of-address)，若是用 DHCP 的話，稱為 <strong>C-CoA</strong> (colocated CoA)</li>
<li>MS 收到 CoA 後，會向它的 HA 註冊這個 CoA 和它的有效綁定的時間限制。這個註冊的過程可能是 MS 直接做，也可能是透過 FA。</li>
<li>別人要傳給 MS 的東西，一開始會先到 HA，HA 會進行封裝。如果用的是 CoA，會先傳給 FA，FA 解封裝後再傳你 MS；如果是用 C-CoA，HA 會直接傳給 MS。</li>
</ol>
<p>Mobile IP 流程：</p>
<ol>
<li>MS 偵測到 FA 定期發的 beacon signal 或 MS 主動發 agent solicitation messages。</li>
<li>FA 分配地址給 MS。若給的是 FA 自己的地址，稱為 <strong>CoA</strong> (care-of-address)，若是用 DHCP 的話，稱為 <strong>C-CoA</strong> (colocated CoA)</li>
<li>MS 收到 CoA 後，會向它的 HA 註冊這個 CoA 和它的有效綁定的時間限制。這個註冊的過程可能是 MS 直接做，也可能是透過 FA。</li>
<li>別人要傳給 MS 的東西，一開始會先到 HA，HA 會進行封裝。如果用的是 CoA，會先傳給 FA，FA 解封裝後再傳你 MS；如果是用 C-CoA，HA 會直接傳給 MS。</li>
</ol>
<h4>Triangular Routing Problem</h4>
<p><img src="untitled-8.png" alt=""></p>
<p>以上圖左邊為例，對要傳給你的 source 來說，你直接從 FA 傳回給它它會不知道你是誰（它認為它是跟 HA 通訊，所以不知道你 FA 是誰）。解決方法為 reverse tunneling，FA 還是要走反方向回去 HA。所以在這個問題裡，不可避免的要繞遠路。</p>
<h2>Rerouting in Backbone Routers</h2>
<p>MS 到了新的地方要接用新的 FA，MS 的 HA 不變，那麼新的 FA 是要如何知道 HA 在哪？怎麼去？</p>
<p>每個 router 會維護一張表。上面不是記去每個 paging area 要怎麼走的詳細資料，而是類似 gateway 的概念，記的是去哪個 paging area 從當前的 router 走的話下一站要走到哪裡。在這裡記的是 paging area 是因為如果是記 router 的話，數量太多了，不可能都放。</p>
<p><img src="untitled-9.png" alt="">
<img src="untitled-10.png" alt=""></p>
<h2>Multicasting</h2>
<p>群播：一個傳送者多個接受者。</p>
<h3>大家從同樣的 HA 移動到同樣的 FA</h3>
<p>做法：bidirectional tunneling、remote subscription。</p>
<h4>Bidirectional Tunneling</h4>
<p>每個 MS 建一個 HA 到 FA 的 tunnel。</p>
<ul>
<li>缺點：傳送的資料重複了，浪費頻寬。</li>
<li>優點：由於有 HA，資料傳輸不會中斷。</li>
</ul>
<h4>Remote Subscription</h4>
<p>FA 不透過 HA 拿資料。FA 它自己長到 delivery tree。</p>
<ul>
<li>缺點：有資料中斷的可能。（在 FA 長到樹上之前，MS 收不到資料）</li>
<li>優點：(1)避免傳一樣的資料。(2)不透過 HA 就能找一條更近的路直接從 source 到 FA。</li>
</ul>
<h3>在不同 HA 的大家移動到相同 FA 的狀況</h3>
<h4>DMSP (Designated Multicast Service Provider)</h4>
<p>從多個選一個 HA 建 tunnel 到 FA。被選到那個的 MS 若自己本身就跑掉去別的 FA 的話，再從剩下的選一個。</p>
<ul>
<li>缺點：可能會資料中斷。（一次找多個一點可以降低資料中斷的可能）</li>
<li>優點：避免傳重覆的東西。</li>
</ul>

        
    </div>

    <div class="py-2"></div>
    <hr>
    <div class="comments">
<div id="disqus_thread"></div>
<script>
  var disqus_config = function() { this.page.identifier = "/blog/ch09-mobile-communication-systems"; };
  (function() {
    var d = document, s = d.createElement('script');
    s.src = '//liaowc-github-page.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>
  Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript"
    rel="nofollow">comments powered by Disqus.</a>
</noscript>
</div>

                </div>
                
            </div>

            <div class="col-md-2 mx-4 my-4">
                

            </div>

        </div>
    </section>


<!-- Footer -->
<footer class="page-footer font-small blue ">

    
    <div class="container">

        
        <div class="row">

            <!-- Grid column -->
            <div class="col-md-12 py-3">
                <div class="mb-3 flex-center">

                    <!--Linkedin -->
                    <a class="li-ic" href="https://www.linkedin.com/in/%E5%94%AF%E8%BE%B0-%E5%BB%96-306b951b4/"
                       aria-label="Go to LiaoWC's LinkedIn">
                        <i class="fab fa-linkedin-in fa-lg white-text mr-md-5 mr-3 fa-2x"></i>
                    </a>
                    <!--Github-->
                    <a class="ins-ic" href="https://github.com/LiaoWC" aria-label="Go to LiaoWC's Github">
                        <i class="fab fa-github fa-lg white-text mr-md-5 mr-3 fa-2x"></i>
                    </a>
                    <!--Heroku-->
                    <a tabindex="0" class="ins-ic popover-dismiss" aria-label="Got to LiaoWC's Herokuapp"
                       role="button" data-toggle="popover" data-trigger="focus" data-placement="top"
                            
                       data-content="Coming soon..."
                    >
                        <i class="fab fa-python fa-lg white-text  fa-2x"></i>
                    </a>

                </div>
            </div>
            <!-- Grid column -->

        </div>
        

    </div>
    

    <!-- Copyright -->
    <div class="footer-copyright text-center py-3"> Copyright &copy; 2020 LiaoWC. &nbsp;
    </div>
    <!-- Copyright -->

</footer>
<!-- Footer -->

<script>
    $('.popover-dismiss').popover({
        trigger: 'focus'
    })
</script>



<script type="text/javascript" src="../../static/js/layout.js"></script>

    <script type="text/javascript" src="../../static/js/blog.js"></script>

</body>
</html>
